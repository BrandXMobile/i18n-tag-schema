<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>i18n-tag-schema</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script src="assets/js/modernizr.js"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">i18n-tag-schema</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> i18n-tag-schema</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="i18n-tagged-template-literals-schema-generator-build-status-https-img-shields-io-travis-skolmer-i18n-tag-schema-master-svg-style-flat-https-travis-ci-org-skolmer-i18n-tag-schema-npm-version-https-img-shields-io-npm-v-i18n-tag-schema-svg-style-flat-https-www-npmjs-com-package-i18n-tag-schema-">i18n Tagged Template Literals - Schema Generator <a href="https://travis-ci.org/skolmer/i18n-tag-schema"><img src="https://img.shields.io/travis/skolmer/i18n-tag-schema/master.svg?style=flat" alt="Build Status"></a> <a href="https://www.npmjs.com/package/i18n-tag-schema"><img src="https://img.shields.io/npm/v/i18n-tag-schema.svg?style=flat" alt="npm version"></a></h1>
				<p><a href="https://nodei.co/npm/i18n-tag-schema/"><img src="https://nodei.co/npm/i18n-tag-schema.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM"></a></p>
				<p><a href="http://i18n-tag.kolmer.net/"><img src="images/vscode-18n-tag-schema-icon-big.jpg" alt="i18n Tagged Template Literals"></a></p>
				<h2 id="overview">Overview</h2>
				<p>This node module generates a <a href="http://json-schema.org/">JSON Schema</a> of all <a href="https://github.com/skolmer/es2015-i18n-tag">i18n tagged</a> template literals in a JavaScript project.
					A JSON schema can add key validation and autocompletion to your JSON based translation files (See <a href="#ide-integration">IDE Integration</a>).
					The tool will only detect template literals that are tagged with i18n (See <a href="http://i18n-tag.kolmer.net/">es2015-i18n-tag</a>).
				It has support for <a href="https://github.com/skolmer/es2015-i18n-tag#appjs">Custom Translation Groups</a> and generated <a href="https://github.com/skolmer/es2015-i18n-tag#babel-generated-file-module-groups">File Module Groups</a>. If you want to use generated File Module Groups you have to set <code>groups</code> to <code>true</code>.</p>
				<p>The following repository provides examples for use with npm scripts or gulp: <a href="https://github.com/skolmer/i18n-tag-examples">https://github.com/skolmer/i18n-tag-examples</a></p>
				<p>i18n-tag-schema can also be used to export translation keys into a simple json format (See <a href="#additional-features">Additional Features</a>). This can be useful if you want to import your translation keys into a 3rd party tool. (Other export formats might be added later. Feature requests are welcome!)</p>
				<p>This module does include a JSON validator that helps you keep track of missing or invalid keys in your translation files and shows you the current translation coverage of your project. A translation file is considered valid if it covers 100% of the translation keys defined in the JSON schema. This feature can be integrated into an automated build pipeline to check the translation coverage of a build. It can also be used to write unit tests that fail if your modules are not fully translated.</p>
				<h2 id="installation">Installation</h2>
				<pre><code class="lang-sh">$ npm install i18n-tag-schema --save-dev
</code></pre>
				<h2 id="usage">Usage</h2>
				<pre><code class="lang-js"><span class="hljs-keyword">import</span> i18nTagSchema <span class="hljs-keyword">from</span> <span class="hljs-string">'i18n-tag-schema'</span>

i18nTagSchema(<span class="hljs-string">'./src'</span>, <span class="hljs-string">'\\.jsx?'</span>, <span class="hljs-string">'./translation.schema.json'</span>, <span class="hljs-literal">false</span>, (output, type) =&gt; {
    <span class="hljs-comment">// log(output)</span>
})
</code></pre>
				<p><a href="http://github.kolmer.net/i18n-tag-schema/globals.html#default">See docs</a></p>
				<h3 id="via-npm">Via npm</h3>
				<h4 id="package-json">package.json</h4>
				<pre><code class="lang-json">{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"generate-schema"</span>: <span class="hljs-string">"i18n-tag-schema ./src"</span>,
    <span class="hljs-attr">"validate-german-translation"</span>: <span class="hljs-string">"i18n-tag-schema ./translations/translation.de.json --validate --schema ./translation.schema.json"</span>,
    <span class="hljs-attr">"validate-translations"</span>: <span class="hljs-string">"i18n-tag-schema ./translations --validate --schema ./translation.schema.json"</span>
  }
}
</code></pre>
				<pre><code class="lang-sh">$ npm run generate-schema
$ npm run validate-german-translation
$ npm run validate-translations
</code></pre>
				<h3 id="via-gulp">Via Gulp</h3>
				<pre><code class="lang-js"><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>)
<span class="hljs-keyword">var</span> i18nTagSchema = <span class="hljs-built_in">require</span>(<span class="hljs-string">'i18n-tag-schema'</span>).default
<span class="hljs-keyword">var</span> validateSchema = <span class="hljs-built_in">require</span>(<span class="hljs-string">'i18n-tag-schema'</span>).validateSchema
gulp.task(<span class="hljs-string">'generate-translation-schema'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cb</span>) </span>{
  i18nTagSchema(<span class="hljs-string">'./src'</span>, <span class="hljs-string">'\\.jsx?'</span>, <span class="hljs-string">'./translation.schema.json'</span>, <span class="hljs-literal">false</span>, (output, type) =&gt; {
      <span class="hljs-built_in">console</span>.log(output)
      <span class="hljs-keyword">if</span>(type === <span class="hljs-string">'error'</span> || type === <span class="hljs-string">'success'</span>) cb(); <span class="hljs-comment">// finished task</span>
  })
})

gulp.task(<span class="hljs-string">'validate-german-translation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cb</span>) </span>{
  validateSchema(<span class="hljs-string">'./translations/translation.de.json'</span>, <span class="hljs-string">'./translation.schema.json'</span>, (output, type) =&gt; {
      <span class="hljs-built_in">console</span>.log(output)
      <span class="hljs-keyword">if</span>(type === <span class="hljs-string">'error'</span> || type === <span class="hljs-string">'success'</span>) cb(); <span class="hljs-comment">// finished task</span>
  })
})

gulp.task(<span class="hljs-string">'validate-translations'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">cb</span>) </span>{
  validateSchema(<span class="hljs-string">'./translations'</span>, <span class="hljs-string">'./translation.schema.json'</span>, (output, type) =&gt; {
      <span class="hljs-built_in">console</span>.log(output)
      <span class="hljs-keyword">if</span>(type === <span class="hljs-string">'error'</span> || type === <span class="hljs-string">'success'</span>) cb(); <span class="hljs-comment">// finished task</span>
  })
})
</code></pre>
				<h3 id="via-command-line">Via Command-line</h3>
				<p>Install i18n-tag-schema as global package to use it as command-line tool</p>
				<pre><code class="lang-sh">$ npm install i18n-tag-schema -g
</code></pre>
				<pre><code>Usage: i18n-<span class="hljs-keyword">tag</span>-schema <span class="hljs-symbol">&lt;path&gt;</span> [<span class="hljs-keyword">options</span>]

Option<span class="hljs-variable">s:</span>

    -h, --<span class="hljs-keyword">help</span>            output usage information
    -V, --<span class="hljs-keyword">version</span>         output the <span class="hljs-keyword">version</span> <span class="hljs-keyword">number</span>
    -s, --schema <span class="hljs-symbol">&lt;path&gt;</span>   <span class="hljs-keyword">set</span> schema path. defaults <span class="hljs-keyword">to</span> ./translation.schema.json
    -<span class="hljs-keyword">f</span>, --<span class="hljs-built_in">filter</span> <span class="hljs-symbol">&lt;regex&gt;</span>  <span class="hljs-keyword">a</span> regular expression <span class="hljs-keyword">to</span> <span class="hljs-built_in">filter</span> <span class="hljs-keyword">source</span> <span class="hljs-keyword">files</span>. defaults <span class="hljs-keyword">to</span> \.jsx?
    -g, --groups          group translations by module filenames
    -v, --validate        use <span class="hljs-keyword">to</span> validate translation <span class="hljs-keyword">file</span>(s). path <span class="hljs-built_in">has</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">be</span> <span class="hljs-keyword">a</span> JSON <span class="hljs-keyword">file</span> <span class="hljs-built_in">or</span> directory. requires --schema <span class="hljs-symbol">&lt;path&gt;</span>
    -<span class="hljs-keyword">e</span>, --export <span class="hljs-symbol">&lt;path&gt;</span>   export <span class="hljs-keyword">all</span> translation <span class="hljs-built_in">keys</span> FROM <span class="hljs-keyword">a</span> JavaScript <span class="hljs-keyword">file</span> <span class="hljs-built_in">or</span> directory.
    -t, --target <span class="hljs-symbol">&lt;path&gt;</span>   export <span class="hljs-keyword">all</span> translation <span class="hljs-built_in">keys</span> TO <span class="hljs-keyword">a</span> JSON <span class="hljs-keyword">file</span>. requires --export <span class="hljs-symbol">&lt;path&gt;</span>.
                          If --target <span class="hljs-keyword">is</span> not <span class="hljs-keyword">set</span>, JSON will <span class="hljs-keyword">be</span> printed <span class="hljs-keyword">to</span> the output.
</code></pre><h3 id="reference-schema-in-translation-json-file">Reference schema in translation.json file</h3>
				<pre><code class="lang-json">{
    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"./translation.schema.json"</span>,
    <span class="hljs-attr">"key"</span>: <span class="hljs-string">"value"</span>
}
</code></pre>
				<h2 id="validation-rules">Validation Rules</h2>
				<p>The generated Schema checks</p>
				<ul>
					<li>if your translation file is missing some of your project&#39;s translation keys.</li>
					<li>if a translation key or group is unknown.</li>
					<li>if a translation value contains all parameters defined in the translation key (e.g. ${0}, ${1}).</li>
				</ul>
				<p>Some IDEs can also provide auto completion for translation keys and groups</p>
				<h2 id="ide-integration">IDE Integration</h2>
				<h3 id="webstorm-phpstorm">Webstorm / PhpStorm</h3>
				<p>Webstorm and PhpStorm support JSON Schemas since version 2016.1. For more details please see:  <a href="https://www.jetbrains.com/help/webstorm/2016.1/add-json-schema-mapping-dialog.html">Add JSON Schema Mapping Dialog</a></p>
				<h3 id="visual-studio-code">Visual Studio Code</h3>
				<p>For Visual Studio Code you can install the i18n-tag-schema extension from <a href="https://marketplace.visualstudio.com/items?itemName=skolmer.vscode-i18n-tag-schema">Visual Studio Code Marketplace</a></p>
				<h2 id="additional-features">Additional Features</h2>
				<h3 id="export-translation-keys">Export translation keys</h3>
				<p>Read all i18n tagged template literals from a JavaScript file or directory</p>
				<pre><code class="lang-js"><span class="hljs-keyword">import</span> { exportTranslationKeys } <span class="hljs-keyword">from</span> <span class="hljs-string">'i18n-tag-schema'</span>

exportTranslationKeys(<span class="hljs-string">'./samples'</span>, <span class="hljs-string">'.'</span>, <span class="hljs-literal">false</span>,
    (message, type) =&gt; {
        <span class="hljs-keyword">const</span> cons = <span class="hljs-built_in">console</span>[type]
        <span class="hljs-keyword">if</span>(cons) {
            cons(message)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">console</span>.log(message)
        }        
    },
    (templates) =&gt; {
        <span class="hljs-comment">/**
        * templates: [
        *     '\n        &lt;user name="${0}"&gt;${1}&lt;/user&gt;\n    ',
        *     '\n    &lt;users&gt;\n    ${0}\n    &lt;/users&gt;\n'
        * ]
        */</span> 
    }
)
</code></pre>
				<h3 id="validate-translation-file">Validate translation file</h3>
				<p>The validation function checks</p>
				<ul>
					<li>if your translation files are missing some of your project&#39;s translation keys.</li>
					<li>if a translation key or group is unknown.</li>
					<li>if a translation value contains all parameters defined in the translation key (e.g. ${0}, ${1}).</li>
				</ul>
				<pre><code class="lang-js"><span class="hljs-keyword">import</span> { validateSchema } <span class="hljs-keyword">from</span> <span class="hljs-string">'i18n-tag-schema'</span>

validateSchema(<span class="hljs-string">'./translations'</span>, <span class="hljs-string">'./translation.schema.json'</span>, (output, type) =&gt; {
    <span class="hljs-keyword">switch</span> (type) {
        <span class="hljs-keyword">const</span> cons = <span class="hljs-built_in">console</span>[type]
        <span class="hljs-keyword">if</span>(cons) {
            cons(message)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">console</span>.log(message)
        } 
        <span class="hljs-keyword">if</span>(type === <span class="hljs-string">'error'</span> || type === <span class="hljs-string">'success'</span>) {
            <span class="hljs-comment">// isValid(type === 'success')</span>
        }
    }
})
</code></pre>
				<p><a href="http://github.kolmer.net/i18n-tag-schema/globals.html#exportTranslationKeys">See docs</a></p>
				<h2 id="tools">Tools</h2>
				<h3 id="run-time-translation-and-localization">Run time translation and localization</h3>
				<ul>
					<li><a href="https://github.com/skolmer/es2015-i18n-tag">es2015-i18n-tag</a>: ES2015 template literal tag for i18n and l10n (translation and internationalization) using Intl <a href="https://www.npmjs.com/package/es2015-i18n-tag"><img src="https://img.shields.io/npm/v/es2015-i18n-tag.svg?style=flat" alt="npm version"></a></li>
				</ul>
				<h3 id="build-time-translation">Build time translation</h3>
				<ul>
					<li><a href="https://github.com/skolmer/babel-plugin-i18n-tag-translate">babel-plugin-i18n-tag-translate</a>: Translate your template literals at build time or add filename groups <a href="https://www.npmjs.com/package/babel-plugin-i18n-tag-translate"><img src="https://img.shields.io/npm/v/babel-plugin-i18n-tag-translate.svg?style=flat" alt="npm version"></a></li>
				</ul>
				<h3 id="schema-based-translations">Schema based translations</h3>
				<ul>
					<li><a href="https://github.com/skolmer/vscode-i18n-tag-schema">vscode-18n-tag-schema</a>: Visual Studio Code Extension for JSON Schema based translation validation and tools <a href="https://marketplace.visualstudio.com/items?itemName=skolmer.vscode-i18n-tag-schema"><img src="https://vsmarketplacebadge.apphb.com/version-short/skolmer.vscode-i18n-tag-schema.svg" alt="Marketplace Version"></a></li>
				</ul>
				<h2 id="license">License</h2>
				<p>Copyright (c) 2016 Steffen Kolmer</p>
				<p>This software is licensed under the MIT license.  See the <code>LICENSE</code> file
				accompanying this software for terms of use.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-function">
						<a href="globals.html#default" class="tsd-kind-icon">default</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#exporttranslationkeys" class="tsd-kind-icon">export<wbr>Translation<wbr>Keys</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="globals.html#validateschema" class="tsd-kind-icon">validate<wbr>Schema</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer>
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>